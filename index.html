<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tilt Physics Game</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #222;
      touch-action: none;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="game"></canvas>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <script>
    const { Engine, Render, Runner, World, Bodies, Body, Events } = Matter;

    const canvas = document.getElementById("game");
    const engine = Engine.create();
    const world = engine.world;
    const render = Render.create({
      canvas: canvas,
      engine: engine,
      options: {
        width: window.innerWidth,
        height: window.innerHeight,
        wireframes: false,
        background: '#222'
      }
    });

    Render.run(render);
    const runner = Runner.create();
    Runner.run(runner, engine);

    function resizeCanvas() {
      render.canvas.width = window.innerWidth;
      render.canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Add some fixed squares
    const fixedSquares = [
      Bodies.rectangle(200, 400, 100, 100, { isStatic: true, render: { fillStyle: '#f55' } }),
      Bodies.rectangle(window.innerWidth - 200, 300, 100, 100, { isStatic: true, render: { fillStyle: '#5f5' } })
    ];

    World.add(world, fixedSquares);

    // Add bouncing circles
    const balls = [];
    for (let i = 0; i < 10; i++) {
      const ball = Bodies.circle(Math.random() * window.innerWidth, Math.random() * window.innerHeight / 2, 30, {
        restitution: 0.8,
        friction: 0.05,
        render: {
          fillStyle: '#88f'
        }
      });
      balls.push(ball);
    }

    World.add(world, balls);

    // Add walls
    const ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight + 50, window.innerWidth, 100, { isStatic: true });
    const ceiling = Bodies.rectangle(window.innerWidth / 2, -50, window.innerWidth, 100, { isStatic: true });
    const leftWall = Bodies.rectangle(-50, window.innerHeight / 2, 100, window.innerHeight, { isStatic: true });
    const rightWall = Bodies.rectangle(window.innerWidth + 50, window.innerHeight / 2, 100, window.innerHeight, { isStatic: true });
    World.add(world, [ground, ceiling, leftWall, rightWall]);

    // Tilt interaction
    window.addEventListener('deviceorientation', function(event) {
      const tiltX = event.gamma; // left-to-right
      const tiltY = event.beta;  // front-to-back

      if (tiltX !== null && tiltY !== null) {
        // Convert to gravity vector
        const gravityX = tiltX / 90;
        const gravityY = tiltY / 90;

        engine.gravity.x = gravityX;
        engine.gravity.y = gravityY;
      }
    });
  </script>
</body>
</html>
